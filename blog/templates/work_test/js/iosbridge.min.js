var mdSmartios=mdSmartios||{};(function(e){if(e.bridge)console.log("mdSmartios.bridge is already defined.");else{if(e.bridge=e.bridge||{},e.bridge.storage={},e.bridge.commandInterface=function(o,n,i,t){let r={};r.operation=o,r.params=n,r.cammandId=Math.floor(1e4*Math.random());let a=r.cammandId,c=JSON.stringify(r);"function"==typeof i&&(e.bridge.callbackFunctions[a]=i),"function"==typeof t&&(e.bridge.callbackFailFunctions[a]=t);let d=e.bridge.po._execObjcMethod("commandInterface",c);return d},e.bridge.trackEvent=function(o,n,i){e.bridge.commandInterface("trackEvent",o,n&&n,i&&i)},e.bridge.takePhoto=function(o,n,i){null!=o&&""!=o||(o={}),o.cammandId=Math.floor(1e5*Math.random());let t=o.cammandId,r=JSON.stringify(o);"function"==typeof n&&(e.bridge.callbackFunctions[t]=n),"function"==typeof i&&(e.bridge.callbackFailFunctions[t]=i);let a=e.bridge.po._execObjcMethod("takePhoto4",r);return a},e.bridge.convertLocalImageToBase64=function(o,n,i){null!=o&&""!=o||(o={}),o.cammandId=Math.floor(1e5*Math.random());let t=o.cammandId,r=JSON.stringify(o);"function"==typeof n&&(e.bridge.callbackFunctions[t]=n),"function"==typeof i&&(e.bridge.callbackFailFunctions[t]=i);let a=e.bridge.po._execObjcMethod("convertLocalImageToBase64",r);return a},e.bridge.clearWebViewCache=function(){console.log("function:mdSmartios.bridge.clearWebViewCache"),e.bridge.po._execObjcMethod("clearWebViewCache")},e.bridge.callbackFunctions={},e.bridge.callbackFailFunctions={},e.bridge.setCardTitleCBF=void 0,e.bridge.retObjcValue=0,e.bridge.retSnValue="",e.bridge.applicationId="",e.bridge.currentApplianceSubtype="",e.bridge.callbackFunction=function(o,n){console.log("callbackFunction result",o,n);var i=n;if("string"==typeof i)try{i=JSON.parse(i)}catch(e){console.error("callbackFunction parse error",o,e)}var t=e.bridge.callbackFunctions[o],r=e.bridge.callbackFailFunctions[o];void 0!==i.errCode&&"TimeOut"==i.errMessage?-1==i.errCode?-1!=location.href.indexOf("card")&&(bridge.logToIOS("Jump to cardDisconnect.html."),location.href="cardDisconnect2.html"):("function"==typeof r&&r(-1),1==i.isAction&&bridge.popupTimeOut()):"function"==typeof t&&t(i.messageBody||i),delete e.bridge.callbackFunctions[o],delete e.bridge.callbackFailFunctions[o]},e.bridge.po={_execObjcMethod:function(o,n){try{var i=o;null!=n&&""!=n&&(i=i+"?"+n),console.log("Exec "+i);var t=document.createElement("IFRAME");t.setAttribute("src","iosbridge://"+i),document.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null}catch(e){console.log(o+" exception")}return e.bridge.retObjcValue}},e.bridge.showAlert=function(o){console.log("function:mdSmartios.bridge.showAlert");var n={};null!=o&&(n.cmdParamers=o);var i=JSON.stringify(n),t=e.bridge.po._execObjcMethod("showAlert",i);return t},e.bridge.goToMeijuPage=function(o,n){console.log("function:mdSmartios.bridge.goToMeijuPage"),o=o||"jumpNative",n=n||{pageName:"service_home",needNavigation:"1",needTabbar:"1"};var i={};i.type=o,i.param=n;var t=JSON.stringify(i),r=e.bridge.po._execObjcMethod("goToMeijuPage",t);return r},!e.bridge.isAndroid){var o=navigator.userAgent;e.bridge.isAndroid=o.indexOf("Android")>-1||o.indexOf("Linux")>-1}e.bridge.pageName="肌肤管家首页";var n=navigator.userAgent.toLowerCase();e.bridge.isMeiju=/meiju|msmart/.test(n),e.bridge.getQueryVariable=function(e){for(var o=window.location.search.substring(1),n=o.split("&"),i=0;i<n.length;i++){var t=n[i].split("=");if(t[0]==e)return t[1]}return!1},e.bridge.pageViewTracking=function(o){if(console.log("pageName:",o),e.bridge.pageName=o,e.bridge.isMeiju){e.bridge.pageName=o;let n={event:"plugin_page_view",eventParams:{module:"插件",bd_name:"厨热",apptype_name:"电热水器",widget_cate:"E2",page_name:o}};e.bridge.trackEvent(n)}},e.bridge.buttonClickTracking=function(o,n){if(e.bridge.isMeiju){"object"==typeof n&&(n=JSON.stringify(n));let i={event:"plugin_button_click",eventParams:{module:"插件",bd_name:"厨热",apptype_name:"电热水器",widget_cate:"E2",page_name:e.bridge.pageName,element_content:o,custom_params:n||""}};console.log("buttonClickTracking:",i),e.bridge.trackEvent(i)}}}})(mdSmartios),function(e,o){console.log("--iPhone bridge--"),-1!=e.navigator.userAgent.indexOf("DEBUG_LOG")&&(console=new Object,console.log=function(e){var o=document.createElement("IFRAME");o.setAttribute("src","ios-log:#iOS#"+e),document.documentElement.appendChild(o),o.parentNode.removeChild(o),o=null},console.warn=function(e){console.log(e)},console.debug=function(e){console.log(e)},console.error=function(e){console.log(e)},console.info=function(e){console.log(e)},console.trace=function(e){console.log(e)}),e.bridge=o.bridge,e.mdSmartios=o,o.bridge.retObjcValue=0}(window,mdSmartios);
var mdSmartios=mdSmartios||{};(function(e){if(e.bridge)console.log("mdSmartios.bridge is already defined.");else{if(e.bridge=e.bridge||{},e.bridge.storage={},e.bridge.interfaceWrapper=function(o,n,r,i){let t=Object.assign({},n);null!=t&&""!=t||(t={}),t.cammandId=Math.floor(1e5*Math.random());var a=t.cammandId,c=JSON.stringify(t);"function"==typeof r&&(e.bridge.callbackFunctions[a]=r),"function"==typeof i&&(e.bridge.callbackFailFunctions[a]=i);var d=e.bridge.po._execObjcMethod(o,c);return d},e.bridge.commandInterface=function(o,n,r,i){let t={};t.operation=o,t.params=n,t.cammandId=Math.floor(1e4*Math.random());let a=t.cammandId,c=JSON.stringify(t);"function"==typeof r&&(e.bridge.callbackFunctions[a]=r),"function"==typeof i&&(e.bridge.callbackFailFunctions[a]=i);let d=e.bridge.po._execObjcMethod("commandInterface",c);return d},e.bridge.trackEvent=function(o,n,r){e.bridge.commandInterface("trackEvent",o,n&&n,r&&r)},e.bridge.takePhoto=function(o,n,r){null!=o&&""!=o||(o={}),o.cammandId=Math.floor(1e5*Math.random());let i=o.cammandId,t=JSON.stringify(o);"function"==typeof n&&(e.bridge.callbackFunctions[i]=n),"function"==typeof r&&(e.bridge.callbackFailFunctions[i]=r);let a=e.bridge.po._execObjcMethod("takePhoto4",t);return a},e.bridge.convertLocalImageToBase64=function(o,n,r){null!=o&&""!=o||(o={}),o.cammandId=Math.floor(1e5*Math.random());let i=o.cammandId,t=JSON.stringify(o);"function"==typeof n&&(e.bridge.callbackFunctions[i]=n),"function"==typeof r&&(e.bridge.callbackFailFunctions[i]=r);let a=e.bridge.po._execObjcMethod("convertLocalImageToBase64",t);return a},e.bridge.showProgress=function(){return console.log("function:mdSmartios.bridge.showProgress"),e.bridge.po._execObjcMethod("showProgress")},e.bridge.closeProgress=function(){return console.log("function:mdSmartios.bridge.closeProgress"),e.bridge.po._execObjcMethod("closeProgress")},e.bridge.clearWebViewCache=function(){console.log("function:mdSmartios.bridge.clearWebViewCache"),e.bridge.po._execObjcMethod("clearWebViewCache")},e.bridge.callbackFunctions={},e.bridge.callbackFailFunctions={},e.bridge.setCardTitleCBF=void 0,e.bridge.retObjcValue=0,e.bridge.retSnValue="",e.bridge.applicationId="",e.bridge.currentApplianceSubtype="",e.bridge.callbackFunction=function(o,n){console.log("callbackFunction result",o,n);var r=n;if("string"==typeof r)try{r=JSON.parse(r)}catch(e){console.error("callbackFunction parse error",o,e)}var i=e.bridge.callbackFunctions[o],t=e.bridge.callbackFailFunctions[o];void 0!==r.errCode&&"TimeOut"==r.errMessage?-1==r.errCode?-1!=location.href.indexOf("card")&&(bridge.logToIOS("Jump to cardDisconnect.html."),location.href="cardDisconnect2.html"):("function"==typeof t&&t(-1),1==r.isAction&&bridge.popupTimeOut()):"function"==typeof i&&i(r.messageBody||r),delete e.bridge.callbackFunctions[o],delete e.bridge.callbackFailFunctions[o]},e.bridge.po={_execObjcMethod:function(o,n){try{var r=o;null!=n&&""!=n&&(r=r+"?"+n),console.log("Exec "+r);var i=document.createElement("IFRAME");i.setAttribute("src","iosbridge://"+r),document.documentElement.appendChild(i),i.parentNode.removeChild(i),i=null}catch(e){console.log(o+" exception")}return e.bridge.retObjcValue}},e.bridge.jsWindowOnError=function(e,o,n,r){var i={obj:e,arg1:o,arg2:n,arg3:r},t=JSON.stringify(i);console.log("mdSmartios.bridge.jsWindowOnError():"+t)},e.bridge.showAlert=function(o){console.log("function:mdSmartios.bridge.showAlert");var n={};null!=o&&(n.cmdParamers=o);var r=JSON.stringify(n),i=e.bridge.po._execObjcMethod("showAlert",r);return i},e.bridge.goToMeijuPage=function(o,n){console.log("function:mdSmartios.bridge.goToMeijuPage"),o=o||"jumpNative",n=n||{pageName:"service_home",needNavigation:"1",needTabbar:"1"};var r={};r.type=o,r.param=n;var i=JSON.stringify(r),t=e.bridge.po._execObjcMethod("goToMeijuPage",i);return t},!e.bridge.isAndroid){var o=navigator.userAgent;e.bridge.isAndroid=o.indexOf("Android")>-1||o.indexOf("Linux")>-1}e.bridge.pageName="肌肤管家首页";var n=navigator.userAgent.toLowerCase();e.bridge.isMeiju=/meiju|msmart/.test(n),e.bridge.getQueryVariable=function(e){for(var o=window.location.search.substring(1),n=o.split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]==e)return i[1]}return!1},e.bridge.pageViewTracking=function(o){if(console.log("pageName:",o),e.bridge.pageName=o,e.bridge.isMeiju){e.bridge.pageName=o;let n={event:"plugin_page_view",eventParams:{module:"插件",bd_name:"厨热",apptype_name:"电热水器",widget_cate:"E2",page_name:o}};e.bridge.trackEvent(n)}},e.bridge.buttonClickTracking=function(o,n){if(e.bridge.isMeiju){"object"==typeof n&&(n=JSON.stringify(n));let r={event:"plugin_button_click",eventParams:{module:"插件",bd_name:"厨热",apptype_name:"电热水器",widget_cate:"E2",page_name:e.bridge.pageName,element_content:o,custom_params:n||""}};console.log("buttonClickTracking:",r),e.bridge.trackEvent(r)}}}})(mdSmartios),function(e,o){console.log("--iPhone bridge--"),-1!=e.navigator.userAgent.indexOf("DEBUG_LOG")&&(console=new Object,console.log=function(e){var o=document.createElement("IFRAME");o.setAttribute("src","ios-log:#iOS#"+e),document.documentElement.appendChild(o),o.parentNode.removeChild(o),o=null},console.warn=function(e){console.log(e)},console.debug=function(e){console.log(e)},console.error=function(e){console.log(e)},console.info=function(e){console.log(e)},console.trace=function(e){console.log(e)}),e.bridge=o.bridge,e.mdSmartios=o,o.bridge.retObjcValue=0}(window,mdSmartios);
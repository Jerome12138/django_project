var mdSmartios=mdSmartios||{};(function(e){if(e.bridge)console.log("mdSmartios.bridge is already defined.");else{if(e.bridge=e.bridge||{},e.bridge.storage={},e.bridge.interfaceWrapper=function(n,o,i,r){let t=Object.assign({},o);null!=t&&""!=t||(t={}),t.cammandId=Math.floor(1e5*Math.random());var a=t.cammandId,c=JSON.stringify(t);"function"==typeof i&&(e.bridge.callbackFunctions[a]=i),"function"==typeof r&&(e.bridge.callbackFailFunctions[a]=r);var d=e.bridge.po._execObjcMethod(n,c);return d},e.bridge.commandInterface=function(n,o,i,r){let t={};t.operation=n,t.params=o,t.cammandId=Math.floor(1e4*Math.random());let a=t.cammandId,c=JSON.stringify(t);"function"==typeof i&&(e.bridge.callbackFunctions[a]=i),"function"==typeof r&&(e.bridge.callbackFailFunctions[a]=r);let d=e.bridge.po._execObjcMethod("commandInterface",c);return d},e.bridge.trackEvent=function(n,o,i){e.bridge.commandInterface("trackEvent",n,o&&o,i&&i)},e.bridge.takePhoto=function(n,o,i){null!=n&&""!=n||(n={}),n.cammandId=Math.floor(1e5*Math.random());let r=n.cammandId,t=JSON.stringify(n);"function"==typeof o&&(e.bridge.callbackFunctions[r]=o),"function"==typeof i&&(e.bridge.callbackFailFunctions[r]=i);let a=e.bridge.po._execObjcMethod("takePhoto4",t);return a},e.bridge.convertLocalImageToBase64=function(n,o,i){null!=n&&""!=n||(n={}),n.cammandId=Math.floor(1e5*Math.random());let r=n.cammandId,t=JSON.stringify(n);"function"==typeof o&&(e.bridge.callbackFunctions[r]=o),"function"==typeof i&&(e.bridge.callbackFailFunctions[r]=i);let a=e.bridge.po._execObjcMethod("convertLocalImageToBase64",t);return a},e.bridge.clearWebViewCache=function(){console.log("function:mdSmartios.bridge.clearWebViewCache"),e.bridge.po._execObjcMethod("clearWebViewCache")},e.bridge.callbackFunctions={},e.bridge.callbackFailFunctions={},e.bridge.setCardTitleCBF=void 0,e.bridge.retObjcValue=0,e.bridge.retSnValue="",e.bridge.applicationId="",e.bridge.currentApplianceSubtype="",e.bridge.callbackFunction=function(n,o){console.log("callbackFunction result",n,o);var i=o;if("string"==typeof i)try{i=JSON.parse(i)}catch(e){console.error("callbackFunction parse error",n,e)}var r=e.bridge.callbackFunctions[n],t=e.bridge.callbackFailFunctions[n];void 0!==i.errCode&&"TimeOut"==i.errMessage?-1==i.errCode?-1!=location.href.indexOf("card")&&(bridge.logToIOS("Jump to cardDisconnect.html."),location.href="cardDisconnect2.html"):("function"==typeof t&&t(-1),1==i.isAction&&bridge.popupTimeOut()):"function"==typeof r&&r(i.messageBody||i),delete e.bridge.callbackFunctions[n],delete e.bridge.callbackFailFunctions[n]},e.bridge.po={_execObjcMethod:function(n,o){try{var i=n;null!=o&&""!=o&&(i=i+"?"+o),console.log("Exec "+i);var r=document.createElement("IFRAME");r.setAttribute("src","iosbridge://"+i),document.documentElement.appendChild(r),r.parentNode.removeChild(r),r=null}catch(e){console.log(n+" exception")}return e.bridge.retObjcValue}},e.bridge.jsWindowOnError=function(e,n,o,i){var r={obj:e,arg1:n,arg2:o,arg3:i},t=JSON.stringify(r);console.log("mdSmartios.bridge.jsWindowOnError():"+t)},e.bridge.showAlert=function(n){console.log("function:mdSmartios.bridge.showAlert");var o={};null!=n&&(o.cmdParamers=n);var i=JSON.stringify(o),r=e.bridge.po._execObjcMethod("showAlert",i);return r},e.bridge.goToMeijuPage=function(n,o){console.log("function:mdSmartios.bridge.goToMeijuPage"),n=n||"jumpNative",o=o||{pageName:"service_home",needNavigation:"1",needTabbar:"1"};var i={};i.type=n,i.param=o;var r=JSON.stringify(i),t=e.bridge.po._execObjcMethod("goToMeijuPage",r);return t},!e.bridge.isAndroid){var n=navigator.userAgent;e.bridge.isAndroid=n.indexOf("Android")>-1||n.indexOf("Linux")>-1}e.bridge.pageName="肌肤管家首页";var o=navigator.userAgent.toLowerCase();e.bridge.isMeiju=/meiju|msmart/.test(o),e.bridge.getQueryVariable=function(e){for(var n=window.location.search.substring(1),o=n.split("&"),i=0;i<o.length;i++){var r=o[i].split("=");if(r[0]==e)return r[1]}return!1},e.bridge.pageViewTracking=function(n){if(console.log("pageName:",n),e.bridge.pageName=n,e.bridge.isMeiju){e.bridge.pageName=n;let o={event:"plugin_page_view",eventParams:{module:"插件",bd_name:"厨热",apptype_name:"电热水器",widget_cate:"E2",page_name:n}};e.bridge.trackEvent(o)}},e.bridge.buttonClickTracking=function(n,o){if(e.bridge.isMeiju){"object"==typeof o&&(o=JSON.stringify(o));let i={event:"plugin_button_click",eventParams:{module:"插件",bd_name:"厨热",apptype_name:"电热水器",widget_cate:"E2",page_name:e.bridge.pageName,element_content:n,custom_params:o||""}};console.log("buttonClickTracking:",i),e.bridge.trackEvent(i)}}}})(mdSmartios),function(e,n){console.log("--iPhone bridge--"),-1!=e.navigator.userAgent.indexOf("DEBUG_LOG")&&(console=new Object,console.log=function(e){var n=document.createElement("IFRAME");n.setAttribute("src","ios-log:#iOS#"+e),document.documentElement.appendChild(n),n.parentNode.removeChild(n),n=null},console.warn=function(e){console.log(e)},console.debug=function(e){console.log(e)},console.error=function(e){console.log(e)},console.info=function(e){console.log(e)},console.trace=function(e){console.log(e)}),e.bridge=n.bridge,e.mdSmartios=n,n.bridge.retObjcValue=0}(window,mdSmartios);